local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")

-- Kiểm tra tất cả các RemoteEvent có trong ReplicatedStorage
local replicatedStorage = game:GetService("ReplicatedStorage")
local possibleEvents = replicatedStorage:GetChildren()

print("📢 Đang kiểm tra sự kiện trong game...")

for _, event in pairs(possibleEvents) do
    if event:IsA("RemoteEvent") then
        print("🔍 Tìm thấy sự kiện: " .. event.Name)
    end
end

-- Tìm sự kiện teleport Minigame
local minigameEvent = replicatedStorage:FindFirstChild("EnterMinigame") or replicatedStorage:FindFirstChild("FlowerGardenTeleport")

-- Tìm sự kiện trồng cây
local plantEvent = replicatedStorage:FindFirstChild("PlantSeedEvent") or replicatedStorage:FindFirstChild("PlantDiamond")

-- Danh sách ô đất trồng cây trong Minigame Flower Garden (Bạn cần tự lấy tọa độ nếu sai)
local farmPlots = {
    Vector3.new(150, 10, 200),  
    Vector3.new(170, 10, 220),  
    Vector3.new(190, 10, 240),  
    Vector3.new(210, 10, 260),  
    Vector3.new(230, 10, 280)  
}

-- Lấy tọa độ hiện tại để debug
print("📍 Tọa độ hiện tại của nhân vật:", humanoidRootPart.Position)

-- Tọa độ cổng Minigame Flower Garden (Bạn cần đứng trước cổng và chạy `print(humanoidRootPart.Position)` để lấy tọa độ)
local minigamePortal = Vector3.new(500, 15, 600) -- Chỉnh lại nếu cần

-- Hàm teleport đến vị trí bất kỳ
local function teleportTo(position)
    if humanoidRootPart then
        humanoidRootPart.CFrame = CFrame.new(position)
        wait(1) -- Chờ 1 giây để đảm bảo nhân vật đã đứng yên
    end
end

-- Hàm vào Minigame Flower Garden
local function enterMinigame()
    if minigameEvent then
        minigameEvent:FireServer()
        print("🌸 Đang vào Minigame Flower Garden bằng sự kiện...")
    else
        print("⚠️ Không tìm thấy sự kiện vào Minigame, thử dịch chuyển đến cổng Minigame...")
        teleportTo(minigamePortal)
    end
end

-- Hàm trồng cây Diamond Seed
local function plantDiamondSeed()
    if plantEvent then
        print("🌱 Đang sử dụng sự kiện trồng cây: " .. plantEvent.Name)
        plantEvent:FireServer("DiamondSeed") -- Gửi yêu cầu trồng cây lên server
    else
        warn("🚨 Không tìm thấy sự kiện trồng cây! Thử click chuột để trồng...")
        -- Auto Click nếu game không có RemoteEvent
        local virtualUser = game:GetService("VirtualUser")
        virtualUser:Button1Down(Vector2.new(0, 0)) -- Giả lập click chuột
        wait(0.2)
        virtualUser:Button1Up(Vector2.new(0, 0))
    end
end

-- Bắt đầu quá trình tự động
print("🚀 Đang vào Minigame Flower Garden...")
enterMinigame()
wait(5) -- Chờ 5 giây sau khi vào minigame

print("🌱 Bắt đầu trồng Diamond Seed...")

for _, position in pairs(farmPlots) do
    teleportTo(position)
    plantDiamondSeed()
    wait(1)  -- Chờ 1 giây trước khi trồng cây ở ô tiếp theo
end

print("✅ Đã trồng xong tất cả Diamond Seed trong Minigame!")
