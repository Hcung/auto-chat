local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")

-- Kiểm tra tất cả các RemoteEvent có trong ReplicatedStorage
local replicatedStorage = game:GetService("ReplicatedStorage")
local possibleEvents = replicatedStorage:GetChildren()

print("📢 Đang kiểm tra sự kiện trồng cây trong game...")

for _, event in pairs(possibleEvents) do
    if event:IsA("RemoteEvent") then
        print("🔍 Tìm thấy sự kiện: " .. event.Name)
    end
end

-- Cập nhật tên sự kiện nếu tìm thấy
local plantEvent = replicatedStorage:FindFirstChild("PlantSeedEvent") or replicatedStorage:FindFirstChild("PlantDiamond")

-- Danh sách ô đất trồng cây trong Minigame Flower Garden
local farmPlots = {
    Vector3.new(50, 5, 100),  
    Vector3.new(70, 5, 120),  
    Vector3.new(90, 5, 140),  
    Vector3.new(110, 5, 160),  
    Vector3.new(130, 5, 180)  
}

-- Tọa độ Minigame Flower Garden (cần thay đổi nếu khác)
local minigameLocation = Vector3.new(300, 15, 500)

-- Hàm teleport đến vị trí bất kỳ
local function teleportTo(position)
    if humanoidRootPart then
        humanoidRootPart.CFrame = CFrame.new(position)
        wait(0.5) -- Chờ nửa giây để đảm bảo nhân vật đã đứng yên
    end
end

-- Hàm vào Minigame Flower Garden
local function enterMinigame()
    local joinEvent = replicatedStorage:FindFirstChild("JoinMinigameEvent") or replicatedStorage:FindFirstChild("EnterFlowerGarden")

    if joinEvent then
        joinEvent:FireServer()
        print("🌸 Đang vào Minigame Flower Garden bằng sự kiện...")
    else
        print("⚠️ Không tìm thấy sự kiện vào Minigame, thử dịch chuyển thủ công...")
        teleportTo(minigameLocation)
    end
end

-- Hàm trồng cây Diamond Seed
local function plantDiamondSeed()
    if plantEvent then
        print("🌱 Đang sử dụng sự kiện trồng cây: " .. plantEvent.Name)
        plantEvent:FireServer("DiamondSeed") -- Gửi yêu cầu trồng cây lên server
    else
        warn("🚨 Không tìm thấy sự kiện trồng cây! Thử click chuột để trồng...")
        -- Auto Click nếu game không có RemoteEvent
        local virtualUser = game:GetService("VirtualUser")
        virtualUser:Button1Down(Vector2.new(0, 0)) -- Giả lập click chuột
        wait(0.2)
        virtualUser:Button1Up(Vector2.new(0, 0))
    end
end

-- Bắt đầu quá trình tự động
print("🚀 Đang vào Minigame Flower Garden...")
enterMinigame()
wait(3) -- Chờ 3 giây sau khi vào minigame

print("🌱 Bắt đầu trồng Diamond Seed...")

for _, position in pairs(farmPlots) do
    teleportTo(position)
    plantDiamondSeed()
    wait(1)  -- Chờ 1 giây trước khi trồng cây ở ô tiếp theo
end

print("✅ Đã trồng xong tất cả Diamond Seed trong Minigame!")
