local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- 📌 Tọa độ điểm spawn ban đầu
local startPosition = Vector3.new(184.9508819580078, 22.715150833129883, 1995.9241943359375)

-- 📌 Tọa độ đích cần teleport đến sau khi vào map
local targetPosition = Vector3.new(-465.9693908691406, 108.42337036132812, -1399.500244140625)

-- 📌 Hàm teleport nhân vật
local function teleportToStart()
    if humanoidRootPart then
        humanoidRootPart.CFrame = CFrame.new(startPosition)
        print("✅ Đã teleport đến vị trí ban đầu!")
    end
end

-- 📌 Teleport ngay khi vào game
teleportToStart()

-- 📌 Chờ 1 giây rồi di chuyển vào map
task.wait(1)

-- 📌 Di chuyển nhân vật về phía trước (3-4 bước)
local moveDirection = Vector3.new(0, 0, -5) -- Điều chỉnh vector để đi đúng hướng vào map
for i = 1, 4 do
    humanoidRootPart.CFrame = humanoidRootPart.CFrame * CFrame.new(moveDirection)
    task.wait(0.5) -- Đợi để tránh lỗi dịch chuyển quá nhanh
end
print("🚶‍♂️ Nhân vật đã vào map!")

-- 📌 Tự động teleport đến vị trí mới sau khi vào map
task.wait(2) -- Đợi 2 giây để đảm bảo nhân vật đã vào map ổn định
humanoidRootPart.CFrame = CFrame.new(targetPosition)
print("✅ Teleport đến vị trí mới mà không ảnh hưởng đến camera!")

-- 📌 Kiểm tra nếu nhân vật bị rớt khỏi map, tự động teleport về lại vị trí ban đầu
task.spawn(function()
    while task.wait(2) do -- Kiểm tra mỗi 2 giây
        if humanoidRootPart and humanoidRootPart.Position.Y < 10 then -- Nếu rơi xuống quá thấp
            print("⚠️ Phát hiện nhân vật rớt khỏi map! Đang teleport lại...")
            teleportToStart()
        end
    end
end)
